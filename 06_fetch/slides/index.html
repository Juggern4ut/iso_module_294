<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Modul 294 – Lektion 06</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />

    <style>
        td {
            font-size: 21px;
        }

        .inline-code {
            font-family: Consolas, Monaco, monospace;
            background-color: #2d2d2d;
            padding: 2px 4px;
            border-radius: 2px;
            font-size: 75%;
        }
    </style>
</head>

<body>
<div class="reveal">
<div class="slides">

<section>
    <h2>06 – Fetch im Detail</h2>
    <hr />
    <h3>GET, POST, Header & Request-Optionen</h3>
    <img style="width: 200px" src="assets/img/js-logo.webp" alt="JS Logo" />
</section>

<section>
    <h2>Lernziele dieser Lektion</h2>
    <ul>
        <li>Verstehen, wie <span class="inline-code">fetch</span> intern arbeitet</li>
        <li>GET- und POST-Requests unterscheiden</li>
        <li>Header korrekt mitsenden</li>
        <li>Daten im Request-Body versenden</li>
        <li>Responses und Fehler sauber behandeln</li>
    </ul>
</section>

<section>
    <h2>Was ist fetch?</h2>
    <p><span class="inline-code">fetch</span> ist eine moderne API für HTTP-Anfragen.</p>
    <ul>
        <li>arbeitet asynchron</li>
        <li>liefert immer ein Promise zurück</li>
        <li>ersetzt ältere APIs wie XMLHttpRequest</li>
    </ul>
</section>

<section>
    <h2>Grundaufbau von fetch</h2>
    <pre><code class="js" data-trim>
fetch(url, options)
    </code></pre>

    <ul>
        <li><b>url</b>: Ziel der Anfrage</li>
        <li><b>options</b>: Konfiguration (optional)</li>
    </ul>
</section>

<section>
    <h2>Einfacher GET-Request</h2>
    <pre><code class="js" data-trim>
fetch("https://jsonplaceholder.typicode.com/posts")
    .then(response => response.json())
    .then(data => console.log(data));
    </code></pre>

    <p>Ohne Options-Objekt wird automatisch ein GET-Request gesendet.</p>
</section>

<section>
    <h2>GET mit async / await</h2>
    <pre><code class="js" data-trim>
async function loadPosts() {
    const response = await fetch("https://jsonplaceholder.typicode.com/posts");
    const data = await response.json();
    console.log(data);
}
    </code></pre>
</section>

<section>
    <h2>Was ist eine Response?</h2>
    <ul>
        <li>Antwort des Servers</li>
        <li>enthaelt Statuscode (z. B. 200, 404)</li>
        <li>Daten muessen explizit gelesen werden</li>
    </ul>
</section>

<section>
    <h2>Status pruefen</h2>
    <pre><code class="js" data-trim>
if (!response.ok) {
    throw new Error("Fehler: " + response.status);
}
    </code></pre>

    <p><span class="inline-code">ok</span> ist true bei Statuscodes 200–299.</p>
</section>

<section>
    <h2>Fetch mit Fehlerbehandlung</h2>
    <pre><code class="js" data-trim>
async function loadData() {
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error("HTTP-Fehler");
        }
        const data = await response.json();
        console.log(data);
    } catch (error) {
        console.error(error);
    }
}
    </code></pre>
</section>

<section>
    <h2>HTTP-Methoden</h2>
    <table>
        <tr>
            <td><b>GET</b></td>
            <td>Daten laden</td>
        </tr>
        <tr>
            <td><b>POST</b></td>
            <td>Daten senden</td>
        </tr>
        <tr>
            <td><b>PUT / PATCH</b></td>
            <td>Daten aendern</td>
        </tr>
        <tr>
            <td><b>DELETE</b></td>
            <td>Daten loeschen</td>
        </tr>
    </table>
</section>

<section>
    <h2>POST-Request – Grundidee</h2>
    <p>POST wird verwendet, um neue Daten an einen Server zu senden.</p>
    <p>Dazu werden Options benoetigt.</p>
</section>

<section>
    <h2>POST mit fetch</h2>
    <pre><code class="js" data-trim>
fetch(url, {
    method: "POST"
});
    </code></pre>
</section>

<section>
    <h2>Header mitsenden</h2>
    <pre><code class="js" data-trim>
fetch(url, {
    method: "POST",
    headers: {
        "Content-Type": "application/json"
    }
});
    </code></pre>

    <p>Header beschreiben, wie der Request interpretiert werden soll.</p>
</section>

<section>
    <h2>Request-Body senden</h2>
    <pre><code class="js" data-trim>
fetch(url, {
    method: "POST",
    headers: {
        "Content-Type": "application/json"
    },
    body: JSON.stringify({
        title: "Neuer Eintrag",
        completed: false
    })
});
    </code></pre>
</section>

<section>
    <h2>POST mit async / await</h2>
    <pre><code class="js" data-trim>
async function createTodo() {
    const response = await fetch(url, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            title: "Mein Todo",
            completed: false
        })
    });

    const data = await response.json();
    console.log(data);
}
    </code></pre>
</section>

<section>
    <h2>Typische Header</h2>
    <ul>
        <li><span class="inline-code">Content-Type</span></li>
        <li><span class="inline-code">Authorization</span></li>
        <li><span class="inline-code">Accept</span></li>
    </ul>
</section>

<section>
    <h2>Warum Header wichtig sind</h2>
    <ul>
        <li>Server weiss, wie Daten gelesen werden muessen</li>
        <li>Authentifizierung erfolgt oft über Header</li>
        <li>Falsche Header führen zu Fehlern</li>
    </ul>
</section>

<section>
    <h2>Zusammenfassung: Fetch-Optionen</h2>
    <pre><code class="js" data-trim>
fetch(url, {
    method: "POST",
    headers: { ... },
    body: JSON.stringify(data)
});
    </code></pre>
</section>

<section>
    <h2>TL;DR</h2>
    <ul>
        <li><span class="inline-code">fetch</span> sendet HTTP-Anfragen</li>
        <li>GET laedt Daten, POST sendet Daten</li>
        <li>Header beschreiben den Request</li>
        <li>Body enthaelt die gesendeten Daten</li>
        <li>Fehler muessen explizit behandelt werden</li>
    </ul>
</section>

</div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
    Reveal.initialize({
        hash: true,
        plugins: [RevealHighlight]
    });
</script>

</body>
</html>
